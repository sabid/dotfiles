#!/usr/bin/env bash

source ~/dotfiles/.zshrc

# Pure
autoload -U promptinit && promptinit
prompt pure
PROMPT='%(?.%F{green}.%F{red}❯%F{green})❯%f '

# General
alias hosts="sudo vi /etc/hosts"

# Grep
alias grep='grep -r --extended-regexp --color=auto --exclude-dir=.svn --exclude-dir=.git'

# NPM
# https://gist.github.com/DanHerbert/9520689
NPM_PACKAGES="${HOME}/.npm-packages"
NODE_PATH="$NPM_PACKAGES/lib/node_modules:$NODE_PATH"
PATH="$NPM_PACKAGES/bin:$PATH"
unset MANPATH
MANPATH="$NPM_PACKAGES/share/man:$(manpath)"
# export PATH="$HOME/.node/bin:$PATH"

npm="~/.npm-packages/bin/npm"
npmrc="vi ~/.npmrc"

# Go
export PATH="$PATH:/usr/local/go/bin"
export GOPATH=~/.go

# Homestead
alias hs="~/.composer/vendor/bin/homestead"

# PHP
alias php5='brew unlink php70 && brew link php56'
alias php7='brew unlink php56 && brew link php70'
source ~/.phpbrew/bashrc

# Applications
alias sourcetree="open -a SourceTree"
alias phpstorm='open -a /Applications/PhpStorm.app "`pwd`"'

# Add RVM to PATH for scripting
export PATH="$PATH:$HOME/.rvm/bin"

# MAMP
function mamp {
    rm /Applications/MAMP/htdocs
    ln -s $(cd "$1"; pwd) /Applications/MAMP/htdocs
}
export PATH="/usr/local/sbin:$PATH"

# Default Browser
# Requires https://github.com/kerma/defaultbrowser
alias br="defaultbrowser -set"

export NVM_DIR="/Users/sebastiandedeyne/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"  # This loads nvm

function vm() {
   cd ~/Homestead
   
   command="$1"

   if [ "$command" = "edit" ]; then
      vi ~/.homestead/homestead.yaml
   else
      if [ -z "$command" ]; then 
         command="ssh"
      fi
   
      eval "vagrant ${command}"
   fi

   cd -
}

function db {
    if [ "$1" = "refresh" ]; then
        mysql -uroot -e "drop database $2; create database $2"
    elif [ "$1" = "create" ]; then
        mysql -uroot -e "create database $2"
    elif [ "$1" = "drop" ]; then
        mysql -uroot -e "drop database $2"
    fi
}
